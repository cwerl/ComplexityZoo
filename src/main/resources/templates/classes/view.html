<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:include="fragments/layout :: page">

<body>
   <th:block th:fragment="content">
      <p class="alert alert-success" th:if="${param.success}">Successfully created complexity class. Edit it here or <a
            th:href="@{/classes}">go back</a> to add more.</p>
      <p class="alert alert-secondary" th:if="${param.redir}">You've been redirected here because a class with this name
         already exists.</p>
      <p th:utext="${class.description}"></p>
      <a class="btn btn-secondary mb-3" th:href="@{/classes/{id}/edit(id=${class.id})}">Edit</a>
      <div class="row">

         <div class="col">
            <h3><span class="badge badge-prob"><i class="bi bi-braces"></i></span> Problems</h3>
            <a class="btn btn-primary float-end mt-3">Add</a>
         </div>

         <div class="col">
            <h3><span class="badge badge-rel"><i class="bi bi-diagram-2"></i></span> Relations to other classes</h3>
            <ul class="list-group">
               <li class="list-group-item d-flex align-items-center justify-content-between" th:each="relation : ${relations}">
                  <div>
                  <span th:text="${relation.firstClass.name}"></span>
                  <span th:text="${relation.type}"></span>
                  <span th:text="${relation.secondClass.name}"></span>
               </div>
                  <form action="#" th:action="@{'{classId}/relation/{relationId}/delete'(classId=${class.id}, relationId=${relation.id})}" th:method="delete">
                     <button type="submit" class="btn btn-danger ms-1">Delete</button>
                   </form>
               </li>
            </ul>

            <button type="button" class="btn btn-primary float-end mt-3" data-bs-toggle="modal"
               data-bs-target="#relationModal">
               Add
            </button>

            <!-- New relation modal -->
            <div class="modal fade" id="relationModal" tabindex="-1" aria-labelledby="relationModalLabel"
               aria-hidden="true">
               <div class="modal-dialog modal-dialog-centered">
                  <div class="modal-content">
                     <th:block th:replace="classes/new-relation :: dialog"></th:block>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </th:block>
</body>

</html>